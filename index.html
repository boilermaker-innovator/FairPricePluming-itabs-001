<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Watch & Give ‚Äî Turn YouTube Videos into Donation Moments</title>
    <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600;700&family=Fraunces:ital,opsz,wght@0,9..144,400;0,9..144,600;1,9..144,400&display=swap" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'DM Sans', -apple-system, sans-serif;
            background: #0f0f0f;
            color: #e8e8e8;
            min-height: 100vh;
        }

        /* ‚îÄ‚îÄ Nav ‚îÄ‚îÄ */
        .demo-nav {
            display: flex; align-items: center; justify-content: space-between;
            padding: 16px 24px; border-bottom: 1px solid #222; background: #111;
        }
        .demo-nav-brand {
            display: flex; align-items: center; gap: 10px; font-weight: 700; font-size: 1.1rem;
        }
        .demo-nav-brand .logo-circle {
            width: 32px; height: 32px; background: linear-gradient(135deg, #C75B2A, #E25822);
            border-radius: 50%; display: flex; align-items: center; justify-content: center;
            font-size: 14px; font-weight: 800; color: white;
        }
        .demo-nav-links { display: flex; gap: 24px; }
        .demo-nav-links a { color: #888; text-decoration: none; font-size: 0.88rem; font-weight: 500; transition: color 0.15s; }
        .demo-nav-links a:hover { color: #e8e8e8; }

        /* ‚îÄ‚îÄ Hero ‚îÄ‚îÄ */
        .demo-hero { max-width: 900px; margin: 0 auto; padding: 40px 24px; }
        .demo-hero-label {
            display: inline-flex; align-items: center; gap: 6px;
            background: rgba(199, 91, 42, 0.15); color: #E25822;
            font-size: 11px; font-weight: 600; letter-spacing: 1px; text-transform: uppercase;
            padding: 5px 14px; border-radius: 20px; margin-bottom: 16px;
        }
        .demo-hero-label .dot { width: 6px; height: 6px; background: #E25822; border-radius: 50%; animation: pulse 2s ease-in-out infinite; }
        @keyframes pulse { 0%, 100% { opacity: 1; transform: scale(1); } 50% { opacity: 0.4; transform: scale(1.3); } }
        .demo-hero h1 { font-family: 'Fraunces', serif; font-size: 2.4rem; font-weight: 600; line-height: 1.2; margin-bottom: 12px; }
        .demo-hero h1 span { color: #E25822; }
        .demo-hero p { color: #888; font-size: 1.05rem; line-height: 1.6; max-width: 600px; margin-bottom: 28px; }
        .demo-hero-hint { display: flex; align-items: center; gap: 8px; font-size: 0.82rem; color: #666; margin-top: -14px; margin-bottom: 20px; }
        .demo-hero-hint .arrow { color: #E25822; font-size: 1.2rem; animation: bounce 2s ease-in-out infinite; }
        @keyframes bounce { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(4px); } }

        /* ‚îÄ‚îÄ Video card ‚îÄ‚îÄ */
        .demo-video-card {
            background: #1a1a1a; border-radius: 16px; overflow: hidden;
            border: 1px solid #2a2a2a; box-shadow: 0 8px 40px rgba(0,0,0,0.4); margin-bottom: 24px;
        }
        .demo-video-wrap { position: relative; width: 100%; padding-bottom: 56.25%; background: #111; }
        .demo-video-wrap iframe { position: absolute; top: 0; left: 0; width: 100%; height: 100%; border: none; }
        .demo-video-bottom {
            padding: 14px 18px; display: flex; align-items: center; justify-content: space-between; gap: 12px;
        }
        .demo-video-meta { flex: 1; min-width: 0; }
        .demo-video-title { font-weight: 600; font-size: 0.95rem; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; margin-bottom: 3px; }
        .demo-video-channel { font-size: 0.78rem; color: #888; }
        .demo-donate-btn {
            display: flex; align-items: center; gap: 8px; padding: 10px 20px;
            background: linear-gradient(135deg, #C75B2A, #B5481A); color: white; border: none;
            border-radius: 50px; font-family: 'DM Sans', sans-serif; font-size: 0.85rem; font-weight: 600;
            cursor: pointer; box-shadow: 0 3px 14px rgba(199, 91, 42, 0.4); transition: all 0.2s; white-space: nowrap;
        }
        .demo-donate-btn:hover { transform: translateY(-1px); box-shadow: 0 5px 20px rgba(199, 91, 42, 0.5); }
        .demo-donate-btn .heart { font-size: 1.1rem; animation: heartBounce 3s ease-in-out infinite; }
        @keyframes heartBounce { 0%, 85%, 100% { transform: scale(1); } 90% { transform: scale(1.25); } 95% { transform: scale(1); } }
        .demo-cause-strip {
            padding: 10px 18px 14px; border-top: 1px solid #2a2a2a;
            display: flex; align-items: center; gap: 8px;
        }
        .demo-cause-logo {
            width: 22px; height: 22px; border-radius: 50%; object-fit: cover; flex-shrink: 0;
        }
        .demo-cause-badge {
            display: flex; align-items: center; gap: 5px; font-size: 0.7rem; font-weight: 600;
            color: #E25822; background: rgba(199, 91, 42, 0.12); padding: 3px 10px; border-radius: 20px;
        }
        .demo-cause-badge .dot { width: 5px; height: 5px; background: #E25822; border-radius: 50%; animation: pulse 2s ease-in-out infinite; }
        .demo-cause-text { font-size: 0.75rem; color: #666; flex: 1; }
        .demo-cause-proof { font-size: 0.72rem; color: #666; }
        .demo-cause-proof strong { color: #2D6A4F; }

        /* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
           DONATION POPUP
           ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
        .popup-overlay {
            display: none; position: fixed; inset: 0; background: rgba(15, 15, 15, 0.75);
            z-index: 200; align-items: center; justify-content: center; padding: 20px; backdrop-filter: blur(6px);
        }
        .popup-overlay.show { display: flex; animation: fadeIn 0.2s ease-out; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        @keyframes slideUp { from { opacity: 0; transform: translateY(6px); } to { opacity: 1; transform: translateY(0); } }
        .popup {
            background: #FDFAF6; color: #2C1810; border-radius: 20px; width: 100%; max-width: 400px;
            overflow: hidden; box-shadow: 0 20px 60px rgba(0,0,0,0.5); animation: popUp 0.3s ease;
        }
        @keyframes popUp { from { opacity: 0; transform: scale(0.95) translateY(10px); } to { opacity: 1; transform: scale(1) translateY(0); } }
        .popup-header { padding: 24px 20px 18px; background: linear-gradient(135deg, #C75B2A, #B5481A); color: white; }
        .popup-header-top { display: flex; align-items: center; justify-content: space-between; margin-bottom: 10px; }
        .popup-org { display: flex; align-items: center; gap: 6px; font-size: 0.8rem; font-weight: 600; opacity: 0.9; }
        .popup-org img { width: 20px; height: 20px; border-radius: 50%; object-fit: cover; }
        .popup-close { width: 28px; height: 28px; background: rgba(255,255,255,0.2); border: none; border-radius: 50%; color: white; font-size: 16px; cursor: pointer; display: flex; align-items: center; justify-content: center; }
        .popup-close:hover { background: rgba(255,255,255,0.3); }
        .popup-headline { font-family: 'Fraunces', serif; font-size: 1.25rem; font-weight: 600; line-height: 1.3; }
        .popup-live { display: inline-flex; align-items: center; gap: 5px; margin-top: 10px; font-size: 0.65rem; font-weight: 700; letter-spacing: 1px; opacity: 0.85; }
        .popup-live .dot { width: 6px; height: 6px; background: white; border-radius: 50%; animation: pulse 2s ease-in-out infinite; }

        .popup-impacts { padding: 20px; }
        .popup-impacts-label { font-size: 0.8rem; font-weight: 600; color: #6B5744; margin-bottom: 12px; }
        .popup-impact-card {
            display: flex; align-items: center; gap: 14px; padding: 14px 16px;
            background: #F7F3EE; border: 1.5px solid #E8DDD0; border-radius: 14px;
            margin-bottom: 8px; cursor: pointer; transition: all 0.15s ease;
        }
        .popup-impact-card:hover { border-color: #C75B2A; background: rgba(199, 91, 42, 0.06); }
        .popup-impact-card.selected { border-color: #C75B2A; background: rgba(199, 91, 42, 0.08); transform: scale(1.02); }
        .popup-impact-emoji { font-size: 1.6rem; }
        .popup-impact-desc { flex: 1; font-size: 0.88rem; font-weight: 500; }
        .popup-impact-amount { font-size: 0.95rem; font-weight: 700; color: #C75B2A; }

        /* Custom amount */
        .popup-custom-card {
            display: flex; align-items: center; gap: 14px; padding: 14px 16px;
            background: #F7F3EE; border: 1.5px dashed #E8DDD0; border-radius: 14px;
            margin-top: 10px; cursor: pointer; transition: all 0.15s ease;
        }
        .popup-custom-card:hover { border-color: #C75B2A; background: rgba(199, 91, 42, 0.06); }
        .popup-custom-card .plus-circle {
            width: 38px; height: 38px; border-radius: 50%; background: rgba(199,91,42,0.12); color: #C75B2A;
            display: flex; align-items: center; justify-content: center; font-size: 1.3rem; font-weight: 600;
        }
        .popup-custom-card .custom-label { flex: 1; font-size: 0.88rem; font-weight: 500; color: #6B5744; }
        .popup-custom-input-row {
            display: none; align-items: center; gap: 10px; padding: 10px 16px;
            background: #F7F3EE; border: 1.5px solid #E8DDD0; border-radius: 14px;
            margin-top: 10px; animation: slideUp 0.2s ease;
        }
        .popup-custom-input-row.show { display: flex; }
        .popup-custom-input-row .cur { font-size: 1.1rem; font-weight: 700; color: #9C8B7A; }
        .popup-custom-input-row input {
            flex: 1; padding: 10px 0; border: none; background: transparent;
            font-family: 'DM Sans', sans-serif; font-size: 1.4rem; font-weight: 700;
            color: #2C1810; outline: none; min-width: 0;
        }
        .popup-custom-input-row input::placeholder { color: #9C8B7A; font-weight: 400; font-size: 1rem; }
        .popup-custom-go {
            padding: 8px 18px; border: none; border-radius: 50px; background: #C75B2A;
            color: white; font-family: 'DM Sans', sans-serif; font-size: 0.82rem; font-weight: 600;
            cursor: pointer; transition: all 0.15s;
        }
        .popup-custom-go:disabled { opacity: 0.4; cursor: default; }
        .popup-custom-go:hover:not(:disabled) { filter: brightness(1.1); }

        /* Payment step */
        .popup-payment { display: none; padding: 20px; }
        .popup-payment.show { display: block; animation: slideUp 0.25s ease; }
        .popup-payment-summary {
            display: flex; align-items: center; gap: 12px; padding: 14px 16px;
            background: #F7F3EE; border-radius: 14px; margin-bottom: 14px;
        }
        .popup-payment-summary .emoji { font-size: 1.4rem; }
        .popup-payment-summary .desc { flex: 1; font-size: 0.85rem; font-weight: 500; }
        .popup-payment-summary .amt { font-weight: 700; color: #C75B2A; }
        .popup-pay-btn {
            width: 100%; padding: 13px; border: none; border-radius: 10px;
            font-family: 'DM Sans', sans-serif; font-size: 0.88rem; font-weight: 600;
            cursor: pointer; margin-bottom: 8px; transition: all 0.15s;
        }
        .popup-pay-btn:hover { filter: brightness(1.05); }
        .popup-pay-apple { background: #000; color: #fff; }
        .popup-pay-google { background: #fff; color: #333; border: 1.5px solid #E8DDD0; }
        .popup-pay-card { background: #F7F3EE; color: #2C1810; border: 1.5px solid #E8DDD0; }
        .popup-back { text-align: center; margin-top: 8px; }
        .popup-back button { background: none; border: none; color: #9C8B7A; font-size: 0.82rem; cursor: pointer; font-family: inherit; }
        .popup-back button:hover { color: #2C1810; }

        /* Thank you step */
        .popup-thankyou { display: none; padding: 30px 20px; text-align: center; }
        .popup-thankyou.show { display: block; animation: slideUp 0.25s ease; }
        .popup-thankyou-heart { font-size: 3rem; margin-bottom: 10px; }
        .popup-thankyou-title { font-family: 'Fraunces', serif; font-size: 1.3rem; font-weight: 600; margin-bottom: 6px; color: #2C1810; }
        .popup-thankyou-text { font-size: 0.88rem; color: #6B5744; margin-bottom: 16px; line-height: 1.5; }
        .popup-thankyou-btn {
            padding: 10px 24px; border-radius: 10px; font-family: inherit;
            font-size: 0.85rem; font-weight: 600; cursor: pointer; margin: 0 4px;
            border: 1.5px solid #E8DDD0; background: #F7F3EE; color: #2C1810;
        }
        .popup-thankyou-btn:hover { background: #F0EBE3; }

        .popup-footer { padding: 12px 20px 16px; text-align: center; }
        .popup-proof { font-size: 0.78rem; color: #9C8B7A; }
        .popup-proof strong { color: #C75B2A; font-weight: 700; }
        .popup-powered { font-size: 0.68rem; color: #9C8B7A; margin-top: 8px; }
        .popup-powered a { color: #C75B2A; text-decoration: none; font-weight: 600; }

        /* ‚îÄ‚îÄ How it works ‚îÄ‚îÄ */
        .steps-section { max-width: 900px; margin: 0 auto; padding: 10px 24px 50px; }
        .steps-header { font-family: 'Fraunces', serif; font-size: 1.4rem; font-weight: 600; margin-bottom: 24px; text-align: center; }
        .steps-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 16px; }
        .step-card {
            background: #1a1a1a; border: 1px solid #2a2a2a; border-radius: 12px; padding: 20px; text-align: center;
        }
        .step-num {
            width: 28px; height: 28px; background: linear-gradient(135deg, #C75B2A, #E25822);
            border-radius: 50%; display: flex; align-items: center; justify-content: center;
            font-size: 12px; font-weight: 800; color: white; margin: 0 auto 12px;
        }
        .step-card .emoji { font-size: 1.8rem; margin-bottom: 10px; }
        .step-card h3 { font-size: 0.88rem; font-weight: 600; margin-bottom: 6px; }
        .step-card p { font-size: 0.78rem; color: #777; line-height: 1.5; }

        /* ‚îÄ‚îÄ CTA ‚îÄ‚îÄ */
        .cta-section { max-width: 900px; margin: 0 auto; padding: 0 24px 60px; text-align: center; }
        .cta-btn {
            display: inline-flex; align-items: center; gap: 10px;
            padding: 16px 36px; background: linear-gradient(135deg, #C75B2A, #E25822);
            color: white; border: none; border-radius: 50px;
            font-family: 'DM Sans', sans-serif; font-size: 1rem; font-weight: 600;
            cursor: pointer; box-shadow: 0 6px 30px rgba(199, 91, 42, 0.4);
            transition: all 0.3s; text-decoration: none;
        }
        .cta-btn:hover { transform: translateY(-2px); box-shadow: 0 10px 40px rgba(199, 91, 42, 0.5); }
        .cta-hint { margin-top: 12px; font-size: 0.82rem; color: #555; }

        /* ‚îÄ‚îÄ Footer ‚îÄ‚îÄ */
        .demo-footer {
            border-top: 1px solid #222; padding: 20px 24px; text-align: center;
            font-size: 0.78rem; color: #555;
        }
        .demo-footer a { color: #C75B2A; text-decoration: none; font-weight: 600; }

        @media (max-width: 700px) {
            .steps-grid { grid-template-columns: repeat(2, 1fr); }
            .demo-hero h1 { font-size: 1.6rem; }
            .demo-nav-links { display: none; }
        }
        @media (max-width: 420px) { .steps-grid { grid-template-columns: 1fr; } }
    </style>
</head>
<body>

<!-- Nav -->
<nav class="demo-nav">
    <div class="demo-nav-brand">
        <div class="logo-circle">i</div>
        <span>Watch & Give</span>
    </div>
    <div class="demo-nav-links">
        <a href="#how">How It Works</a>
        <a href="#demo">Demo</a>
    </div>
</nav>

<!-- Hero -->
<div class="demo-hero" id="demo">
    <div class="demo-hero-label"><span class="dot"></span> Live Demo</div>
    <h1>Turn any YouTube video into a <span>donation moment</span></h1>
    <p>Your viewers are watching. They're moved. They want to give. Watch & Give puts a donate button right where the emotion is ‚Äî alongside the video.</p>
    <div class="demo-hero-hint"><span class="arrow">‚Üì</span> Try the donate button ‚Äî it's fully interactive</div>

    <div class="demo-video-card">
        <div class="demo-video-wrap">
            <iframe src="https://www.youtube.com/embed/GXoZLPSw8U8?rel=0&modestbranding=1" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
        </div>
        <div class="demo-video-bottom">
            <div class="demo-video-meta">
                <div class="demo-video-title">Empowering Rural Communities in Tanzania</div>
                <div class="demo-video-channel">Tiamoyo Project</div>
            </div>
            <button class="demo-donate-btn" onclick="openPopup()">
                <span class="heart">‚ù§Ô∏è</span> Donate
            </button>
        </div>
        <div class="demo-cause-strip">
            <img class="demo-cause-logo" src="https://ui-avatars.com/api/?name=Tiamoyo+Empower+Project&background=C75B2A&color=fff&rounded=true&size=128&bold=true" alt="">
            <div class="demo-cause-badge"><span class="dot"></span> Tiamoyo Empower Project</div>
            <span class="demo-cause-text">Empowering rural families in Tanzania</span>
            <span class="demo-cause-proof">‚ù§Ô∏è <strong id="cardProof">7</strong> donated</span>
        </div>
    </div>
</div>

<!-- ‚ïê‚ïê‚ïê DONATION POPUP ‚ïê‚ïê‚ïê -->
<div class="popup-overlay" id="popupOverlay" onclick="if(event.target===this)closePopup()">
    <div class="popup" onclick="event.stopPropagation()">
        <div class="popup-header">
            <div class="popup-header-top">
                <span class="popup-org">
                    <img src="https://ui-avatars.com/api/?name=Tiamoyo+Empower+Project&background=C75B2A&color=fff&rounded=true&size=64&bold=true" alt="">
                    Tiamoyo Empower Project
                </span>
                <button class="popup-close" onclick="closePopup()">‚úï</button>
            </div>
            <div class="popup-headline">Empowering rural families in Tanzania</div>
            <div class="popup-live"><span class="dot"></span> LIVE</div>
        </div>

        <!-- Step 1: Choose impact -->
        <div class="popup-impacts" id="popupStep1">
            <div class="popup-impacts-label">Choose your impact</div>
            <div class="popup-impact-card" data-idx="0" onclick="selectImpact(0)">
                <div class="popup-impact-emoji">üåæ</div>
                <div class="popup-impact-desc">Buy seeds for a family farm</div>
                <div class="popup-impact-amount">$3</div>
            </div>
            <div class="popup-impact-card" data-idx="1" onclick="selectImpact(1)">
                <div class="popup-impact-emoji">üíß</div>
                <div class="popup-impact-desc">Provide clean water for a week</div>
                <div class="popup-impact-amount">$5</div>
            </div>
            <div class="popup-impact-card" data-idx="2" onclick="selectImpact(2)">
                <div class="popup-impact-emoji">üìö</div>
                <div class="popup-impact-desc">Fund a training workshop</div>
                <div class="popup-impact-amount">$10</div>
            </div>
            <div class="popup-custom-card" id="customCard" onclick="showCustomInput()">
                <div class="plus-circle">+</div>
                <div class="custom-label">Give a custom amount</div>
            </div>
            <div class="popup-custom-input-row" id="customInputRow">
                <span class="cur">$</span>
                <input type="number" id="customAmountInput" placeholder="Enter amount" min="1" oninput="document.getElementById('customGoBtn').disabled=!(parseInt(this.value)>0)">
                <button class="popup-custom-go" id="customGoBtn" disabled onclick="submitCustom()">Go ‚Üí</button>
            </div>
        </div>

        <!-- Step 2: Payment -->
        <div class="popup-payment" id="popupStep2">
            <div class="popup-payment-summary" id="popupPaySummary"></div>
            <div id="popupPayButtons"></div>
            <div class="popup-back"><button onclick="popupGoBack()">‚Üê Change selection</button></div>
        </div>

        <!-- Step 3: Thank you -->
        <div class="popup-thankyou" id="popupStep3">
            <div class="popup-thankyou-heart">üíö</div>
            <div class="popup-thankyou-title">You're amazing</div>
            <div class="popup-thankyou-text" id="popupThankText"></div>
            <button class="popup-thankyou-btn" onclick="popupReset()">Donate again</button>
            <button class="popup-thankyou-btn" onclick="closePopup()">Close</button>
        </div>

        <div class="popup-footer">
            <div class="popup-proof">‚ù§Ô∏è <strong id="popupProof">7</strong> people donated while watching</div>
            <div class="popup-powered">Powered by <a href="https://itabs.ai" target="_blank">iTabs</a></div>
        </div>
    </div>
</div>

<!-- How it works -->
<div class="steps-section" id="how">
    <div class="steps-header">How it works</div>
    <div class="steps-grid">
        <div class="step-card">
            <div class="step-num">1</div>
            <div class="emoji">üîó</div>
            <h3>Paste a YouTube Link</h3>
            <p>Any video that moves people to give</p>
        </div>
        <div class="step-card">
            <div class="step-num">2</div>
            <div class="emoji">üé®</div>
            <h3>Add Your Cause</h3>
            <p>Org name, impact tiers, brand colours, logo</p>
        </div>
        <div class="step-card">
            <div class="step-num">3</div>
            <div class="emoji">üëÅ</div>
            <h3>Preview Live</h3>
            <p>See exactly how it looks before downloading</p>
        </div>
        <div class="step-card">
            <div class="step-num">4</div>
            <div class="emoji">üöÄ</div>
            <h3>Download & Deploy</h3>
            <p>One HTML file, works on any website</p>
        </div>
    </div>
</div>

<!-- CTA -->
<div class="cta-section">
    <a class="cta-btn" href="watch-and-give-setup.html">‚ö° Build Your Widget</a>
    <div class="cta-hint">Free ‚Ä¢ No account needed ‚Ä¢ Single HTML file</div>
</div>

<!-- Footer -->
<div class="demo-footer">
    Powered by <a href="https://itabs.ai">iTabs</a> ‚Äî Turn passive content into action
</div>

<script>
    const IMPACTS = [
        { emoji: 'üåæ', desc: 'Buy seeds for a family farm', amount: 3 },
        { emoji: 'üíß', desc: 'Provide clean water for a week', amount: 5 },
        { emoji: 'üìö', desc: 'Fund a training workshop', amount: 10 }
    ];
    let proofCount = 7;
    let selectedTier = null;

    function openPopup() {
        popupReset();
        document.getElementById('popupOverlay').classList.add('show');
        document.body.style.overflow = 'hidden';
    }
    function closePopup() {
        document.getElementById('popupOverlay').classList.remove('show');
        document.body.style.overflow = '';
        setTimeout(popupReset, 300);
    }
    function selectImpact(i) {
        selectedTier = IMPACTS[i];
        document.querySelectorAll('.popup-impact-card').forEach(c => c.classList.remove('selected'));
        document.querySelector(`.popup-impact-card[data-idx="${i}"]`).classList.add('selected');
        setTimeout(() => {
            document.getElementById('popupPaySummary').innerHTML =
                `<span class="emoji">${selectedTier.emoji}</span>` +
                `<span class="desc">${selectedTier.desc}</span>` +
                `<span class="amt">$${selectedTier.amount}</span>`;
            document.getElementById('popupPayButtons').innerHTML =
                `<button class="popup-pay-btn popup-pay-apple" onclick="handlePay()"> Apple Pay ‚Äî $${selectedTier.amount}</button>` +
                `<button class="popup-pay-btn popup-pay-google" onclick="handlePay()">G Pay ‚Äî $${selectedTier.amount}</button>` +
                `<button class="popup-pay-btn popup-pay-card" onclick="handlePay()">üí≥ Card ‚Äî $${selectedTier.amount}</button>`;
            popupShowStep(2);
        }, 200);
    }
    function showCustomInput() {
        document.getElementById('customCard').style.display = 'none';
        document.getElementById('customInputRow').classList.add('show');
        document.querySelectorAll('.popup-impact-card').forEach(c => c.classList.remove('selected'));
        setTimeout(() => document.getElementById('customAmountInput').focus(), 100);
    }
    function submitCustom() {
        const val = parseInt(document.getElementById('customAmountInput').value);
        if (val > 0) {
            selectedTier = { emoji: 'üíõ', desc: 'Custom donation', amount: val };
            document.getElementById('popupPaySummary').innerHTML =
                `<span class="emoji">üíõ</span><span class="desc">Custom donation</span><span class="amt">$${val}</span>`;
            document.getElementById('popupPayButtons').innerHTML =
                `<button class="popup-pay-btn popup-pay-apple" onclick="handlePay()"> Apple Pay ‚Äî $${val}</button>` +
                `<button class="popup-pay-btn popup-pay-google" onclick="handlePay()">G Pay ‚Äî $${val}</button>` +
                `<button class="popup-pay-btn popup-pay-card" onclick="handlePay()">üí≥ Card ‚Äî $${val}</button>`;
            popupShowStep(2);
        }
    }
    function handlePay() {
        popupShowStep(3);
        document.getElementById('popupThankText').textContent =
            `Your $${selectedTier.amount} will ${selectedTier.desc.toLowerCase()}. Thank you for making a difference.`;
        proofCount++;
        document.getElementById('popupProof').textContent = proofCount;
        document.getElementById('cardProof').textContent = proofCount;
    }
    function popupGoBack() { popupShowStep(1); }
    function popupReset() {
        selectedTier = null;
        document.querySelectorAll('.popup-impact-card').forEach(c => c.classList.remove('selected'));
        const cc = document.getElementById('customCard'); if(cc) cc.style.display = '';
        const cr = document.getElementById('customInputRow'); if(cr) cr.classList.remove('show');
        const ci = document.getElementById('customAmountInput'); if(ci) ci.value = '';
        popupShowStep(1);
    }
    function popupShowStep(n) {
        document.getElementById('popupStep1').style.display = n === 1 ? 'block' : 'none';
        document.getElementById('popupStep2').className = 'popup-payment' + (n === 2 ? ' show' : '');
        document.getElementById('popupStep3').className = 'popup-thankyou' + (n === 3 ? ' show' : '');
    }
    // ESC to close
    document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape') closePopup();
    });
</script>
</body>
</html>
